"use strict";(self.webpackChunkagent_prototype=self.webpackChunkagent_prototype||[]).push([[759],{2854:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(9439),s=n(2791),l=n(7689),r=n(184),i=function(e){e.text;var t=e.onClick,n=e.onCancel;return(0,r.jsx)("div",{className:"fixed top-0 left-0 w-screen h-screen flex items-center justify-center bg-gray-600 bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white w-80 h-72 rounded-lg overflow-hidden flex flex-col justify-center items-center",children:[(0,r.jsx)("div",{className:"py-2",children:(0,r.jsx)("h3",{className:"text-black text-center font-bold text-2xl",children:"COB"})}),(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,r.jsx)("button",{className:"bg-sky-600 text-white  font-bold text-lg w-32 h-14 rounded-xl mt-5",onClick:t,children:"Non MV"}),n&&(0,r.jsx)("button",{className:"bg-amber-400 text-white font-bold text-lg w-32 h-14 rounded-xl mt-5",onClick:n,children:"MV"})]})]})})};var o=function(){var e=(0,s.useState)(!1),t=(0,a.Z)(e,2),n=t[0],o=t[1],c=(0,l.s0)(),u=(0,s.useState)(!1),d=(0,a.Z)(u,2),p=d[0],m=d[1],h=(0,s.useState)(""),x=(0,a.Z)(h,2),f=x[0],v=x[1];return(0,r.jsxs)("div",{className:"fixed bottom-16 right-4",children:[(0,r.jsx)("button",{className:"bg-red-500 text-white rounded-full w-20 h-20 flex items-center justify-center shadow-md",onClick:function(){o(!n)},children:(0,r.jsx)("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),n&&(0,r.jsx)("button",{onClick:function(){m(!0),v("klaim")},className:"bg-blue-500 text-white rounded-full w-16 h-16 flex items-center justify-center absolute right-2 bottom-24",children:(0,r.jsx)("span",{className:"text-xs font-bold",children:"Klaim"})}),n&&(0,r.jsx)("button",{onClick:function(){m(!0),v("new")},className:"bg-yellow-500 text-white rounded-full w-16 h-16 flex items-center justify-center absolute right-2 bottom-44 64",children:(0,r.jsx)("span",{className:"text-xs font-bold",children:"New"})}),p&&(0,r.jsx)(i,{onClick:function(){return c("/agent/application/".concat(f,"harta"))},onCancel:function(){return c("/agent/application/".concat(f,"mv"))}})]})}},7420:function(e,t){t.Z=function(e){var t=e.replace(/[^0-9]/g,""),n=parseInt(t);return isNaN(n)?"":"Rp "+n.toLocaleString("id-ID")}},8716:function(e,t){t.Z=function(){return(new Date).toISOString().split("T")[0]}},429:function(e,t,n){n(2791);var a=n(184);t.Z=function(e){var t=e.isPassword?"password":"text",n="w-full  h-10 mt-5  p-3  font-Poppins font-semibold ".concat(e.additionalStyles);return(0,a.jsx)("input",{onChange:e.onChange,type:t,className:n,placeholder:e.placeholder,value:e.value,id:e.id,name:e.name,pattern:e.pattern})}},6078:function(e,t,n){n(2791);var a=n(184);t.Z=function(e){return(0,a.jsx)("main",{className:"font-Poppins rounded-30px px-8 py-6 bg-login mb-16 min-h-screen  w-screen",children:e.content})}},4780:function(e,t,n){n(2791);var a=n(9434),s=n(7060),l=n(7689),r=n(184);t.Z=function(e){var t=(0,a.I0)(),n=(0,l.s0)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("nav",{className:"flex items-center justify-between bg-primary w-full h-14 lg:h-78px font-Poppins px-4 lg:px-2",children:[(0,r.jsx)("span",{className:"text-xl font-bold text-white",children:"BCA Insurance"}),(0,r.jsx)("img",{className:"w-10 h-7",src:"/agent/assets/logout.svg",alt:"logout",onClick:function(){t((0,s.kS)()),n("/agent/")}})]})})}},7960:function(e,t,n){n(2791);var a=n(7689),s=n(184);t.Z=function(e){var t=(0,a.s0)();return(0,s.jsxs)("div",{className:"flex items-center justify-between  fixed bottom-0 left-0 w-full z-50 bg-primary h-14 p-5 font-Poppins rounded-t-30px",children:[(0,s.jsxs)("div",{onClick:function(){t("/agent/home")},className:"flex items-center justify-center flex-col w-20",children:[(0,s.jsx)("img",{className:"w-5 h-5",src:"/agent/assets/home.svg",alt:"home"}),(0,s.jsx)("span",{className:"text-white",children:"Home"})]}),(0,s.jsxs)("div",{onClick:function(){t("/agent/application")},className:"flex items-center justify-center flex-col w-20",children:[(0,s.jsx)("img",{className:"w-5 h-5",src:"/agent/assets/application.svg",alt:"application"}),(0,s.jsx)("span",{className:"text-white",children:"Application"})]}),(0,s.jsxs)("div",{onClick:function(){t("/agent/commision")},className:"flex items-center justify-center flex-col w-20",children:[(0,s.jsx)("img",{className:"w-5 h-5",src:"/agent/assets/commision.svg",alt:"commision"}),(0,s.jsx)("span",{className:"text-white",children:"Commision"})]})]})}},2759:function(e,t,n){n.r(t);var a=n(3433),s=n(4942),l=n(1413),r=n(4165),i=n(5861),o=n(9439),c=n(2791),u=n(4780),d=n(7960),p=n(6078),m=n(2854),h=n(429),x=n(9434),f=n(279),v=n(7689),g=n(7420),j=n(8716),b=n(1883),k=n(184);t.default=function(){var e=(0,c.useState)({polis:"",periode:"",okupasi:"",merek:"",tsi:"",addedDate:"",type:"",model:"",year:"",mesin:"",rangka:"",plat:"",komisi:"",diskon:"",startD:"",endD:"",perluasan:[],wil:0}),t=(0,o.Z)(e,2),n=t[0],w=t[1],N=(0,x.v9)((function(e){return e.username})),y=N.username,Z=(0,c.useState)([]),C=(0,o.Z)(Z,2),S=C[0],P=C[1],D=(0,c.useState)([]),F=(0,o.Z)(D,2),T=F[0],I=F[1],O=(0,c.useState)([]),R=(0,o.Z)(O,2),M=R[0],E=R[1],A=(0,x.I0)(),L=(0,v.s0)(),B=(0,j.Z)(),K=(0,c.useState)(""),H=(0,o.Z)(K,2),U=H[0],V=H[1],q=(0,c.useRef)(null),W=(0,c.useRef)(null),_=(0,c.useState)(""),z=(0,o.Z)(_,2),J=z[0],Q=z[1],Y=(0,v.TH)().state,G=(0,c.useState)(0),X=(0,o.Z)(G,2),$=X[0],ee=X[1],te=(0,c.useState)(0),ne=(0,o.Z)(te,2),ae=ne[0],se=ne[1],le=Y.insuredName,re=Y.NIK,ie=Y.address,oe=Y.phone,ce=Y.email,ue=Y.COB,de=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,a,s){var l,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.tsi&&n.wil&&n.polis)){e.next=16;break}return e.prev=1,e.next=4,fetch("https://agentserver-production.up.railway.app/ratemv?min=".concat(t,"&max=").concat(t,"&wil=").concat(a,"&type=").concat(s),{method:"POST"});case 4:return l=e.sent,e.next=7,l.json();case 7:i=e.sent,ee(i[0].rate),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:e.next=17;break;case 16:ee(0);case 17:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n,a){return e.apply(this,arguments)}}(),pe=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,a){var s,l,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=0,e.prev=1,e.next=4,fetch("https://agentserver-production.up.railway.app/ratemv?wil=".concat(t,"&type=").concat(n,"&cover=").concat(a),{method:"POST"});case 4:if(!(l=e.sent).ok){e.next=12;break}return e.next=8,l.json();case 8:i=e.sent,s=i[0].rate,e.next=13;break;case 12:throw new Error("Failed to fetch perluasan data");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0);case 18:return e.abrupt("return",s);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n,a){return e.apply(this,arguments)}}(),me=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var a,i,o,c,u,d,p,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,o=a.value,"startD"!==i){e.next=8;break}c=new Date(o),u=new Date(c.getFullYear()+1,c.getMonth(),c.getDate()+1),w((function(e){var t;return(0,l.Z)((0,l.Z)({},e),{},(t={addedDate:B,type:"New"},(0,s.Z)(t,i,o),(0,s.Z)(t,"endD",u.toISOString().split("T")[0]),t))})),V("".concat(c.toISOString().split("T")[0].toString()," - ").concat(u.toISOString().split("T")[0].toString())),e.next=33;break;case 8:if("plat"!==i){e.next=31;break}if(d=o.split(" ")[0],w((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,s.Z)({},i,o))})),!d){e.next=29;break}return e.prev=12,e.next=15,fetch("https://agentserver-production.up.railway.app/plat?plat=".concat(d),{method:"POST"});case 15:if(!(p=e.sent).ok){e.next=23;break}return e.next=19,p.json();case 19:m=e.sent,w((function(e){var t;return(0,l.Z)((0,l.Z)({},e),{},(t={},(0,s.Z)(t,i,o),(0,s.Z)(t,"wil",m.wil),t))})),e.next=24;break;case 23:throw new Error("Failed to fetch wil data");case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),console.error(e.t0);case 29:e.next=33;break;case 31:w((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,s.Z)({addedDate:B,type:"New"},i,o))})),de(parseInt(n.tsi.replace(/ /g,"").replace(/Rp/g,"").replace(/\./g,"")),n.wil,n.polis);case 33:case"end":return e.stop()}}),e,null,[[12,26]])})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var s,l,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.target.value,!t.target.checked){e.next=10;break}return P([].concat((0,a.Z)(S),[s])),e.next=6,pe(n.wil,n.polis,s);case 6:l=e.sent,se((function(e){return e+l})),e.next=15;break;case 10:return P(S.filter((function(e){return e!==s}))),e.next=13,pe(n.wil,n.polis,s);case 13:i=e.sent,se((function(e){return e-i}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=q.current;if(e){W.current=new b.Z(e,{backgroundColor:"rgb(255, 255, 255)",penColor:"rgb(0, 0, 0)"}),W.current.clear()}}),[]),(0,c.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://agentserver-production.up.railway.app/");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,I(a),n.merek&&(s=a.find((function(e){return e.merek===n.merek})))&&E(s.model),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[n.merek]);(0,c.useEffect)((function(){console.log("rateDasar; ".concat($)),console.log("ratePerluasan; ".concat(ae)),console.log("Rate: ".concat(ae+$))}),[ae,$]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(u.Z,{}),(0,k.jsx)(d.Z,{}),(0,k.jsx)(p.Z,{content:(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),A((0,f.Wu)({tsi:n.tsi,polis:n.polis,periode:U,okupasi:n.okupasi,addedDate:n.addedDate,type:n.type,merek:n.merek,model:n.model,year:n.year,mesin:n.mesin,plat:n.plat,rangka:n.rangka,diskon:n.diskon,komisi:25-n.diskon,perluasan:S,sign:J,NIK:re,address:ie,phone:oe,email:ce,COB:ue,insuredName:le,status:"Approval",agentName:y,rate:$+ae})),console.log("\n      rate ".concat($+ae," premi: ").concat(parseInt(n.tsi.replace(/ /g,"").replace(/Rp/g,"").replace(/\./g,""))*$+ae,"\n      ")),L("/agent/application/")},children:[(0,k.jsx)("span",{className:"font-semibold text-xl mb-5",children:"New Application"}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{className:"block mb-2",children:"Jenis Pertanggungan:"}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"radio",name:"polis",value:"Comprehensive",checked:"Comprehensive"===n.polis,onChange:me,className:"mr-2"}),(0,k.jsx)("span",{children:"Comprehensive"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"radio",name:"polis",value:"tlo",checked:"tlo"===n.polis,onChange:me,className:"mr-2"}),(0,k.jsx)("span",{children:"Total Loss Only"})]})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{htmlFor:"merek",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Merek Kendaraan"}),(0,k.jsxs)("select",{name:"merek",id:"merek",value:n.merek,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 font-Poppins font-semibold",children:[(0,k.jsx)("option",{value:"",children:"Pilih merek"}),T.map((function(e,t){return(0,k.jsx)("option",{value:e.merek,children:e.merek},t)}))]})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{htmlFor:"model",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Model Kendaraan"}),(0,k.jsxs)("select",{name:"model",id:"model",value:n.model,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 font-Poppins font-semibold",children:[(0,k.jsx)("option",{value:"",children:"Pilih model"}),M.map((function(e,t){return(0,k.jsx)("option",{value:e,children:e},t)}))]})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{htmlFor:"startD",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Periode Pertanggungan:"}),(0,k.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,k.jsx)("input",{id:"startD",name:"startD",placeholder:"",value:n.startD,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold",type:"date",min:B}),(0,k.jsx)("span",{className:"mt-5",children:"s/d"}),(0,k.jsx)("input",{id:"endD",name:"endD",placeholder:"",value:n.endD,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold",type:"date",min:B})]})]}),(0,k.jsxs)("div",{className:" relative my-5 ",children:[(0,k.jsx)("label",{htmlFor:"plat",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"No Plat"}),(0,k.jsx)("input",{pattern:"[A-Z]{1,2}\\s\\d{1,4}\\s[A-Z]{1,3}",id:"plat",name:"plat",placeholder:"",value:n.plat.toUpperCase(),onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold"})]}),(0,k.jsxs)("div",{className:" relative my-5 ",children:[(0,k.jsx)("label",{htmlFor:"rangka",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"No Rangka"}),(0,k.jsx)(h.Z,{id:"rangka",name:"rangka",placeholder:"",value:n.rangka.toUpperCase(),onChange:me,additionalStyles:"rounded-xl pl-3"})]}),(0,k.jsxs)("div",{className:" relative my-5 ",children:[(0,k.jsx)("label",{htmlFor:"mesin",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"No Mesin"}),(0,k.jsx)(h.Z,{id:"mesin",name:"mesin",placeholder:"",value:n.mesin.toUpperCase(),onChange:me,additionalStyles:"rounded-xl pl-3"})]}),(0,k.jsxs)("div",{className:" relative my-5 ",children:[(0,k.jsx)("label",{htmlFor:"year",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Tahun Pembuatan"}),(0,k.jsx)("input",{id:"year",name:"year",placeholder:"",value:n.year,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold"})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{htmlFor:"okupasi",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Okupasi:"}),(0,k.jsxs)("select",{id:"okupasi",name:"okupasi",value:n.okupasi,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 font-Poppins font-semibold",children:[(0,k.jsx)("option",{value:"",children:"Pilih okupasi"}),(0,k.jsx)("option",{value:"Pribadi",children:"Pribadi"}),(0,k.jsx)("option",{value:"Niaga",children:"Niaga"}),(0,k.jsx)("option",{value:"Dinas",children:"Dinas"})]})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{htmlFor:"tsi",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Total Nilai Pertanggungan:"}),(0,k.jsx)("input",{id:"tsi",name:"tsi",placeholder:"",value:(0,g.Z)(n.tsi),onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold",type:"text"})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{className:"block mb-2",children:"Perluasan"}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",name:"perluasan",value:"tshfl",checked:S.includes("tshfl"),onChange:he,className:"mr-2"}),(0,k.jsx)("span",{children:"TSHFL"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",name:"perluasan",value:"rscc",checked:S.includes("rscc"),onChange:he,className:"mr-2"}),(0,k.jsx)("span",{children:"RSCC"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",name:"perluasan",value:"eqvet",checked:S.includes("eqvet"),onChange:he,className:"mr-2"}),(0,k.jsx)("span",{children:"EQVET"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",name:"perluasan",value:"ts",checked:S.includes("ts"),onChange:he,className:"mr-2"}),(0,k.jsx)("span",{children:"TS"})]})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{htmlFor:"diskon",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Diskon:"}),(0,k.jsx)("input",{id:"diskon",name:"diskon",placeholder:"Max 25",value:n.diskon,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold",max:25,type:"number"})]}),(0,k.jsxs)("div",{className:"relative my-5 rounded-xl border-solid border-2 border-gray-300 flex justify-center p-3 flex-col gap-3 shadow-lg",children:[(0,k.jsx)("canvas",{className:"rounded-xl",ref:q}),(0,k.jsx)("div",{className:"flex justify-center items-center w-full"})]}),(0,k.jsxs)("div",{className:"w-full flex justify-between px-2",children:[(0,k.jsx)("button",{onClick:function(){L("/agent/application")},className:"bg-yellow-500 h-8 w-32 text-white font-Poppins rounded-xl transform-gpu transition-transform duration-300 active:scale-90",children:"Cancel"}),(0,k.jsx)("button",{onClick:function(){var e,t=null===(e=W.current)||void 0===e?void 0:e.toDataURL();t&&Q(t)},type:"submit",className:"bg-sky-500 h-8 w-32 text-white font-Poppins rounded-xl transform-gpu transition-transform duration-300 active:scale-90",children:"Send"})]})]})})}),(0,k.jsx)(m.Z,{})]})}}}]);
//# sourceMappingURL=759.a4a89fcc.chunk.js.map