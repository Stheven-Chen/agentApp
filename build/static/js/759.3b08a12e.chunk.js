"use strict";(self.webpackChunkagent_prototype=self.webpackChunkagent_prototype||[]).push([[759],{2854:function(e,n,t){t.d(n,{Z:function(){return c}});var a=t(9439),s=t(2791),l=t(7689),r=t(184),i=function(e){e.text;var n=e.handleClose,t=e.onClick,a=e.onCancel;return(0,r.jsx)("div",{className:"fixed top-0 left-0 w-screen h-screen flex items-center justify-center bg-gray-600 bg-opacity-50",onClick:n,children:(0,r.jsxs)("div",{className:"bg-white w-80 h-72 rounded-lg overflow-hidden flex flex-col justify-center items-center",children:[(0,r.jsx)("div",{className:"py-2",children:(0,r.jsx)("h3",{className:"text-black text-center font-bold text-2xl",children:"COB"})}),(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,r.jsx)("button",{className:"bg-sky-600 text-white font-bold text-lg w-32 h-14 rounded-xl mt-5",onClick:t,children:"Properti"}),a&&(0,r.jsx)("button",{className:"bg-amber-400 text-white font-bold text-lg w-32 h-14 rounded-xl mt-5",onClick:a,children:"MV"})]})]})})};var c=function(){var e=(0,s.useState)(!1),n=(0,a.Z)(e,2),t=n[0],c=n[1],o=(0,l.s0)(),u=(0,s.useState)(!1),d=(0,a.Z)(u,2),p=d[0],m=d[1],h=(0,s.useState)(""),x=(0,a.Z)(h,2),f=x[0],v=x[1];return(0,r.jsxs)("div",{className:"fixed bottom-16 right-4",children:[(0,r.jsx)("button",{className:"bg-red-500 text-white rounded-full w-20 h-20 flex items-center justify-center shadow-md",onClick:function(){c(!t)},children:(0,r.jsx)("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),t&&(0,r.jsx)("button",{onClick:function(){m(!0),v("klaim")},className:"bg-blue-500 text-white rounded-full w-16 h-16 flex items-center justify-center absolute right-2 bottom-24",children:(0,r.jsx)("span",{className:"text-xs font-bold",children:"Klaim"})}),t&&(0,r.jsx)("button",{onClick:function(){m(!0),v("new")},className:"bg-yellow-500 text-white rounded-full w-16 h-16 flex items-center justify-center absolute right-2 bottom-44 64",children:(0,r.jsx)("span",{className:"text-xs font-bold",children:"New"})}),p&&(0,r.jsx)(i,{onClick:function(){return o("/agent/application/".concat(f,"harta"))},onCancel:function(){return o("/agent/application/".concat(f,"mv"))},handleClose:function(){return m(!1)}})]})}},7420:function(e,n){n.Z=function(e){var n=e.replace(/[^0-9]/g,""),t=parseInt(n);return isNaN(t)?"":"Rp "+t.toLocaleString("id-ID")}},8716:function(e,n){n.Z=function(){return(new Date).toISOString().split("T")[0]}},429:function(e,n,t){t(2791);var a=t(184);n.Z=function(e){var n=e.isPassword?"password":"text",t="w-full  h-10 mt-5  p-3  font-Poppins font-semibold ".concat(e.additionalStyles);return(0,a.jsx)("input",{onChange:e.onChange,type:n,className:t,placeholder:e.placeholder,value:e.value,id:e.id,name:e.name,pattern:e.pattern})}},6078:function(e,n,t){t(2791);var a=t(184);n.Z=function(e){return(0,a.jsx)("main",{className:"font-Poppins rounded-30px px-8 py-6 bg-login mb-16 min-h-screen  w-screen",children:e.content})}},4780:function(e,n,t){t(2791);var a=t(9434),s=t(7060),l=t(7689),r=t(184);n.Z=function(e){var n=(0,a.I0)(),t=(0,l.s0)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("nav",{className:"flex items-center justify-between bg-primary w-full h-14 lg:h-78px font-Poppins px-4 lg:px-2",children:[(0,r.jsx)("span",{className:"text-xl font-bold text-white",children:"BCA Insurance"}),(0,r.jsx)("img",{className:"w-10 h-7",src:"/agent/assets/logout.svg",alt:"logout",onClick:function(){n((0,s.kS)()),t("/agent/")}})]})})}},7960:function(e,n,t){t(2791);var a=t(7689),s=t(184);n.Z=function(e){var n=(0,a.s0)();return(0,s.jsxs)("div",{className:"flex items-center justify-between  fixed bottom-0 left-0 w-full z-50 bg-primary h-14 p-5 font-Poppins rounded-t-30px",children:[(0,s.jsxs)("div",{onClick:function(){n("/agent/home")},className:"flex items-center justify-center flex-col w-20",children:[(0,s.jsx)("img",{className:"w-5 h-5",src:"/agent/assets/home.svg",alt:"home"}),(0,s.jsx)("span",{className:"text-white",children:"Home"})]}),(0,s.jsxs)("div",{onClick:function(){n("/agent/application")},className:"flex items-center justify-center flex-col w-20",children:[(0,s.jsx)("img",{className:"w-5 h-5",src:"/agent/assets/application.svg",alt:"application"}),(0,s.jsx)("span",{className:"text-white",children:"Application"})]}),(0,s.jsxs)("div",{onClick:function(){n("/agent/commision")},className:"flex items-center justify-center flex-col w-20",children:[(0,s.jsx)("img",{className:"w-5 h-5",src:"/agent/assets/commision.svg",alt:"commision"}),(0,s.jsx)("span",{className:"text-white",children:"Commision"})]})]})}},2759:function(e,n,t){t.r(n);var a=t(3433),s=t(4942),l=t(1413),r=t(4165),i=t(5861),c=t(9439),o=t(2791),u=t(4780),d=t(7960),p=t(6078),m=t(2854),h=t(429),x=t(9434),f=t(279),v=t(7689),g=t(7420),j=t(8716),b=t(1883),k=t(184);n.default=function(){var e=(0,o.useState)({polis:"",periode:"",okupasi:"",merek:"",tsi:"",addedDate:"",type:"",model:"",year:"",mesin:"",rangka:"",plat:"",komisi:"",diskon:0,startD:"",endD:"",perluasan:[],wil:0}),n=(0,c.Z)(e,2),t=n[0],N=n[1],w=(0,x.v9)((function(e){return e.username})),y=w.username,Z=(0,o.useState)([]),C=(0,c.Z)(Z,2),P=C[0],S=C[1],D=(0,o.useState)([]),F=(0,c.Z)(D,2),T=F[0],I=F[1],O=(0,o.useState)([]),R=(0,c.Z)(O,2),A=R[0],E=R[1],L=(0,x.I0)(),M=(0,v.s0)(),B=(0,j.Z)(),H=(0,o.useState)(""),K=(0,c.Z)(H,2),U=K[0],q=K[1],J=(0,o.useRef)(null),V=(0,o.useRef)(null),W=(0,o.useState)(""),_=(0,c.Z)(W,2),z=_[0],Q=_[1],Y=(0,v.TH)().state,G=(0,o.useState)(0),X=(0,c.Z)(G,2),$=X[0],ee=X[1],ne=(0,o.useState)(0),te=(0,c.Z)(ne,2),ae=te[0],se=te[1],le=Y.insuredName,re=Y.NIK,ie=Y.address,ce=Y.phone,oe=Y.email,ue=Y.COB,de=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,a,s){var l,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.tsi&&t.wil&&t.polis)){e.next=16;break}return e.prev=1,e.next=4,fetch("https://agentserver-production.up.railway.app/ratemv?min=".concat(n,"&max=").concat(n,"&wil=").concat(a,"&type=").concat(s),{method:"POST"});case 4:return l=e.sent,e.next=7,l.json();case 7:i=e.sent,ee(i[0].rate),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:e.next=17;break;case 16:ee(0);case 17:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n,t,a){return e.apply(this,arguments)}}(),pe=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t,a){var s,l,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=0,e.prev=1,e.next=4,fetch("https://agentserver-production.up.railway.app/ratemv?wil=".concat(n,"&type=").concat(t,"&cover=").concat(a),{method:"POST"});case 4:if(!(l=e.sent).ok){e.next=12;break}return e.next=8,l.json();case 8:i=e.sent,s=i[0].rate,e.next=13;break;case 12:throw new Error("Failed to fetch perluasan data");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0);case 18:return e.abrupt("return",s);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(n,t,a){return e.apply(this,arguments)}}(),me=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var a,i,c,o,u,d,p,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target,i=a.name,c=a.value,"startD"!==i){e.next=8;break}o=new Date(c),u=new Date(o.getFullYear()+1,o.getMonth(),o.getDate()+1),N((function(e){var n;return(0,l.Z)((0,l.Z)({},e),{},(n={addedDate:B,type:"New"},(0,s.Z)(n,i,c),(0,s.Z)(n,"endD",u.toISOString().split("T")[0]),n))})),q("".concat(o.toISOString().split("T")[0].toString()," - ").concat(u.toISOString().split("T")[0].toString())),e.next=33;break;case 8:if("plat"!==i){e.next=31;break}if(d=c.split(" ")[0],N((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,s.Z)({},i,c))})),!d){e.next=29;break}return e.prev=12,e.next=15,fetch("https://agentserver-production.up.railway.app/plat?plat=".concat(d),{method:"POST"});case 15:if(!(p=e.sent).ok){e.next=23;break}return e.next=19,p.json();case 19:m=e.sent,N((function(e){var n;return(0,l.Z)((0,l.Z)({},e),{},(n={},(0,s.Z)(n,i,c),(0,s.Z)(n,"wil",m.wil),n))})),e.next=24;break;case 23:throw new Error("Failed to fetch wil data");case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),console.error(e.t0);case 29:e.next=33;break;case 31:N((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,s.Z)({addedDate:B,type:"New"},i,c))})),de(parseInt(t.tsi.replace(/ /g,"").replace(/Rp/g,"").replace(/\./g,"")),t.wil,t.polis);case 33:case"end":return e.stop()}}),e,null,[[12,26]])})));return function(n){return e.apply(this,arguments)}}(),he=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var s,l,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.target.value,!n.target.checked){e.next=10;break}return S([].concat((0,a.Z)(P),[s])),e.next=6,pe(t.wil,t.polis,s);case 6:l=e.sent,se((function(e){return e+l})),e.next=15;break;case 10:return S(P.filter((function(e){return e!==s}))),e.next=13,pe(t.wil,t.polis,s);case 13:i=e.sent,se((function(e){return e-i}));case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){var e=J.current;if(e){V.current=new b.Z(e,{backgroundColor:"rgb(255, 255, 255)",penColor:"rgb(0, 0, 0)"}),V.current.clear()}}),[]),(0,o.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://agentserver-production.up.railway.app/");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,I(a),t.merek&&(s=a.find((function(e){return e.merek===t.merek})))&&E(s.model),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[t.merek]);(0,o.useEffect)((function(){console.log("rateDasar; ".concat($)),console.log("ratePerluasan; ".concat(ae)),console.log("Rate: ".concat(ae+$))}),[ae,$]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(u.Z,{}),(0,k.jsx)(d.Z,{}),(0,k.jsx)(p.Z,{content:(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),L((0,f.Wu)({tsi:parseInt(t.tsi.replace(/ /g,"").replace(/Rp/g,"").replace(/\./g,"")),polis:t.polis,periode:U,okupasi:t.okupasi,addedDate:t.addedDate,type:t.type,merek:t.merek,model:t.model,year:t.year,mesin:t.mesin,plat:t.plat,rangka:t.rangka,diskon:t.diskon,komisi:25-t.diskon,perluasan:P,sign:z,NIK:re,address:ie,phone:ce,email:oe,COB:ue,insuredName:le,status:"Approval",agentName:y,rate:$+ae})),console.log("\n      rate ".concat($+ae," premi: ").concat(parseInt(t.tsi.replace(/ /g,"").replace(/Rp/g,"").replace(/\./g,""))*$+ae,"\n      ")),M("/agent/application/")},children:[(0,k.jsx)("span",{className:"font-semibold text-xl mb-5",children:"New Application"}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{className:"block mb-2",children:"Jenis Pertanggungan:"}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"radio",name:"polis",value:"Comprehensive",checked:"Comprehensive"===t.polis,onChange:me,className:"mr-2"}),(0,k.jsx)("span",{children:"Comprehensive"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"radio",name:"polis",value:"tlo",checked:"tlo"===t.polis,onChange:me,className:"mr-2"}),(0,k.jsx)("span",{children:"Total Loss Only"})]})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{htmlFor:"merek",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Merek Kendaraan"}),(0,k.jsxs)("select",{name:"merek",id:"merek",value:t.merek,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 font-Poppins font-semibold",children:[(0,k.jsx)("option",{value:"",children:"Pilih merek"}),T.map((function(e,n){return(0,k.jsx)("option",{value:e.merek,children:e.merek},n)}))]})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{htmlFor:"model",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Model Kendaraan"}),(0,k.jsxs)("select",{name:"model",id:"model",value:t.model,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 font-Poppins font-semibold",children:[(0,k.jsx)("option",{value:"",children:"Pilih model"}),A.map((function(e,n){return(0,k.jsx)("option",{value:e,children:e},n)}))]})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{htmlFor:"startD",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Periode Pertanggungan:"}),(0,k.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,k.jsx)("input",{id:"startD",name:"startD",placeholder:"",value:t.startD,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold",type:"date",min:B}),(0,k.jsx)("span",{className:"mt-5",children:"s/d"}),(0,k.jsx)("input",{id:"endD",name:"endD",placeholder:"",value:t.endD,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold",type:"date",min:B})]})]}),(0,k.jsxs)("div",{className:" relative my-5 ",children:[(0,k.jsx)("label",{htmlFor:"plat",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"No Plat"}),(0,k.jsx)("input",{pattern:"[A-Z]{1,2}\\s\\d{1,4}\\s[A-Z]{1,3}",id:"plat",name:"plat",placeholder:"",value:t.plat.toUpperCase(),onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold"})]}),(0,k.jsxs)("div",{className:" relative my-5 ",children:[(0,k.jsx)("label",{htmlFor:"rangka",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"No Rangka"}),(0,k.jsx)(h.Z,{id:"rangka",name:"rangka",placeholder:"",value:t.rangka.toUpperCase(),onChange:me,additionalStyles:"rounded-xl pl-3"})]}),(0,k.jsxs)("div",{className:" relative my-5 ",children:[(0,k.jsx)("label",{htmlFor:"mesin",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"No Mesin"}),(0,k.jsx)(h.Z,{id:"mesin",name:"mesin",placeholder:"",value:t.mesin.toUpperCase(),onChange:me,additionalStyles:"rounded-xl pl-3"})]}),(0,k.jsxs)("div",{className:" relative my-5 ",children:[(0,k.jsx)("label",{htmlFor:"year",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Tahun Pembuatan"}),(0,k.jsx)("input",{id:"year",name:"year",placeholder:"",value:t.year,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold"})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{htmlFor:"okupasi",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Penggunaan:"}),(0,k.jsxs)("select",{id:"okupasi",name:"okupasi",value:t.okupasi,onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 font-Poppins font-semibold",children:[(0,k.jsx)("option",{value:"",children:"Pilih Penggunaan"}),(0,k.jsx)("option",{value:"Pribadi",children:"Pribadi"}),(0,k.jsx)("option",{value:"Niaga",children:"Niaga"}),(0,k.jsx)("option",{value:"Dinas",children:"Dinas"})]})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{htmlFor:"tsi",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Total Nilai Pertanggungan:"}),(0,k.jsx)("input",{id:"tsi",name:"tsi",placeholder:"",value:(0,g.Z)(t.tsi),onChange:me,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold",type:"text"})]}),(0,k.jsxs)("div",{className:"relative my-5",children:[(0,k.jsx)("label",{className:"block mb-2",children:"Perluasan"}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",name:"perluasan",value:"tshfl",checked:P.includes("tshfl"),onChange:he,className:"mr-2"}),(0,k.jsx)("span",{children:"TSHFL"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",name:"perluasan",value:"rscc",checked:P.includes("rscc"),onChange:he,className:"mr-2"}),(0,k.jsx)("span",{children:"RSCC"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",name:"perluasan",value:"eqvet",checked:P.includes("eqvet"),onChange:he,className:"mr-2"}),(0,k.jsx)("span",{children:"EQVET"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",name:"perluasan",value:"pa",checked:P.includes("pa"),onChange:he,className:"mr-2"}),(0,k.jsx)("span",{children:"PA"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",name:"perluasan",value:"tjh",checked:P.includes("tjh"),onChange:he,className:"mr-2"}),(0,k.jsx)("span",{children:"TJH"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",name:"perluasan",value:"ts",checked:P.includes("ts"),onChange:he,className:"mr-2"}),(0,k.jsx)("span",{children:"TS"})]})]}),(0,k.jsxs)("div",{className:"relative my-5 rounded-xl border-solid border-2 border-gray-300 flex justify-center p-3 flex-col gap-3 shadow-lg",children:[(0,k.jsx)("canvas",{className:"rounded-xl",ref:J}),(0,k.jsx)("div",{className:"flex justify-center items-center w-full"})]}),(0,k.jsxs)("div",{className:"w-full flex justify-between px-2",children:[(0,k.jsx)("button",{onClick:function(){M("/agent/application")},className:"bg-yellow-500 h-8 w-32 text-white font-Poppins rounded-xl transform-gpu transition-transform duration-300 active:scale-90",children:"Cancel"}),(0,k.jsx)("button",{onClick:function(){var e,n=null===(e=V.current)||void 0===e?void 0:e.toDataURL();n&&Q(n)},type:"submit",className:"bg-sky-500 h-8 w-32 text-white font-Poppins rounded-xl transform-gpu transition-transform duration-300 active:scale-90",children:"Send"})]})]})})}),(0,k.jsx)(m.Z,{})]})}}}]);
//# sourceMappingURL=759.3b08a12e.chunk.js.map